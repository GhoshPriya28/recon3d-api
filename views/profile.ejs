<head>
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
</head>
<table width="100%" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td style="height: 60px; background-color: #424650" align="left" valign="middle">
        &nbsp;<a
          href="https://u1992126.ct.sendgrid.net/ls/click?upn=HyjM2aRlgwnTZM3DnMti-2BNGcN9beb7-2FN3ODaGNVgQ76N-2FdFeq4tdOLlN6YKBkipwrq8a_scRzBS56g36qKRuxl0YZnKGRh-2FIclBAoORx0Vc6xAgAs8MW-2BzBen-2FQ9uq-2FVvmxYS95M6YsKXvAXglceZXfv4Sd6V4LArWYnBUAIkeC6tNMUUpJCdaCNnRoYhKttqUv7nt4ZV2QlJhsFWHtmSthsJHc6GC077-2B3B1ZPyAoJzwcgzW3XRYY7wDsR38ovGnsckzTs5oOrmYCRZUS5bluU8Seg-3D-3D"
          style="text-decoration: none" target="_blank" rel="noreferrer">
          <img height="50" src="https://recon3d.everypoint.io/images/Recon3DIcons/Recon3D1x.png" border="0">
        </a>
      </td>
    </tr>
    <tr>
      <td style="height: 2px; background-color: #000000"></td>
    </tr>
  </tbody>
</table>
<div class="main-content">
  <section class="section">

    <div class="section-body">
      <div class="invoice">
        <div class="invoice-print">
          <form method="post" id="profileform" action="/web/admin/resetPassword" class="needs-validation" novalidate="">
            <form method="post" id="profileform" action="/web/admin/resetPassword" class="needs-validation"
              novalidate="">
              <div class="row">
                <div class="container">
                  <div class="row">

                    <div class="col-md-8">
                      <input type="hidden" id="email" name="email" value="<%=username%>" />
                      <input type="hidden" id="genpassword" name="genpassword" value="<%=password%>" />
                      <div class="panel panel-default" style="padding:20px;">
                        <div class="form-group">
                          <label for="password">New Password</label>
                          <input type="password" id="password" name="password" class="form-control" value="" required="">
                          <div id="pwindicator" class="pwindicator">
                            <div class="bar"></div>
                            <div class="label"></div>
                          </div>
                        </div>

                        <div class="form-group">
                          <label for="password-confirm">Confirm Password</label>
                          <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" value=""
                            required="">
                        </div>
                        <div class="form-group">
                          <button type="button" id="login" class="btn btn-dark">Update </button>
                        </div>

                      </div>
                    </div>
                    <script>
                      $(function () {
                        $('#profile-image1').on('click', function () {
                          $('#profile-image-upload').click();
                        });
                      });       
                    </script>

                  </div>
                </div>
              </div>
            </form>
        </div>
      </div>
    </div>
</div>
</div>
</div>
</section>
</div>
<script type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.2/dist/sweetalert2.all.min.js"></script>
<script type="text/javascript"
  src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.2/dist/sweetalert2.all.min.js"></script>

<body>
  <script type="text/javascript">
    $(document).ready(function () {
      $("#login").click(function () {
        if ($("#password").val() == "") {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Insert New Password !!',
          })
          return false;
        }
        if ($("#confirmPassword").val() == "") {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Insert confirm Password !!',
          })
          return false;
        }
        if ($("#password").val() != "" && ($("#password").val() != $("#confirmPassword").val())) {
          Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'wrong confirm password !!',
          })
          return false;
        }


        Swal.fire({
          title: 'Do you want to save the changes?',
          showDenyButton: false,
          showCancelButton: true,
          confirmButtonText: 'Save',
          denyButtonText: `Don't save`,
        }).then((result) => {
          /* Read more about isConfirmed, isDenied below */
          if (result.isConfirmed) {
            //    $("#profileform").submit();
            var reqData = {
              "email": $("#email").val(),
              "genpassword": $("#genpassword").val(),
              "password": $("#password").val(),
              "confirmPassword": $("#confirmPassword").val()
            };

            var url = "/web/admin/resetPassword";
            $.post(url, reqData)
              .done(function (data) {
                if (data.status) {
                  Swal.fire({
                    icon: 'success',
                    title: '',
                    text: data.message,
                  });
                  setTimeout(function () {
                    // window.location = "/dashboard";

                  }, 3000);

                } else {
                  Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: data.message,
                  });
                }

              });
            //
            //Swal.fire('Saved!', '', 'success')
          } else if (result.isDenied) {
            Swal.fire('Changes are not saved', '', 'info')
          }
        });


      });


    });





  </script>
</body>
<style>
  input.hidden {
    position: absolute;
    left: -9999px;
  }

  #profile-image1 {
    cursor: pointer;

    width: 100px;
    height: 100px;
    border: 2px solid #03b1ce;
  }

  .tital {
    font-size: 16px;
    font-weight: 500;
  }

  .bot-border {
    border-bottom: 1px #f8f8f8 solid;
    margin: 5px 0 5px 0
  }
</style>
<%- include ("footer") %>